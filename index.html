<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SKYNN® — South Africa’s Curated Skincare Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="SKYNN® (formerly SkinLabs South Africa) — curated skincare guides, reviews, deals, and dermatologist-backed resources." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@400" rel="stylesheet" />
  <meta name="theme-color" content="#0c0e10" />

  <!-- AdSense loader (your client ID) — load once -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1237323355260727" crossorigin="anonymous"></script>

  <style>
    /* ---------- Design tokens ---------- */
    :root{
      --bg:#0c0e10; --panel:#111418; --muted:#8ca5b3; --brand:#6ee7d2; --brand-2:#b3e5ff;
      --text:#eef3f5; --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.35);
      --max-w:1080px; --gap:14px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    img{max-width:100%;height:auto;display:block}
    a{color:var(--brand);text-decoration:none}
    button{font:inherit;cursor:pointer}
    .sr-only{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px)}

    /* ---------- Layout ---------- */
    .wrap{max-width:var(--max-w);margin:0 auto;padding:0 14px}
    header{
      position:sticky;top:0;z-index:60;backdrop-filter:saturate(1.2) blur(8px);
      background:rgba(12,14,16,.9);border-bottom:1px solid rgba(255,255,255,.08)
    }
    .nav{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 0}
    .brand{display:flex;align-items:center;gap:8px;font-weight:800;letter-spacing:.3px;font-size:18px}
    .brand-icon{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:8px;background:linear-gradient(135deg,#6ee7d2,#b3e5ff);color:#052a23}
    .badge{font-size:12px;color:var(--muted)}
    .menu{display:flex;gap:8px;align-items:center}
    .menu a{color:#dfe8ec;padding:8px 10px;border-radius:10px}
    .pill{font-size:12px;padding:7px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);color:#b7c7d0}

    /* Mobile drawer */
    .hamburger{display:inline-flex;gap:6px;align-items:center;background:#0e1114;border:1px solid rgba(255,255,255,.12);border-radius:10px;color:#dfe8ec;padding:8px 10px}
    .drawer{display:none}
    .drawer.open{
      position:fixed;inset:56px 10px auto 10px;z-index:70;display:flex;flex-direction:column;gap:6px;
      background:#0e1114;border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:10px
    }
    .drawer a{display:flex;align-items:center;gap:8px;color:#eaf2f6;padding:10px;border-radius:10px}
    .drawer a:hover{background:#12161b}
    .icon{font-family:"Material Symbols Outlined";font-size:18px;line-height:1}

    @media (min-width: 880px){
      .hamburger{display:none}
      .drawer{display:flex;position:static;flex-direction:row;gap:10px;background:transparent;border:none;padding:0}
      .drawer a{padding:8px 10px}
    }

    .panel{
      background:linear-gradient(180deg,#151a1f,#111418 60%);border:1px solid rgba(255,255,255,.06);
      border-radius:var(--radius);box-shadow:var(--shadow)
    }

    /* Hero */
    .hero{display:grid;grid-template-columns:1fr;gap:var(--gap);padding:var(--gap) 0 8px}
    @media (min-width: 960px){ .hero{grid-template-columns:1.2fr .8fr} }
    .hero .panel{padding:14px}
    .hero h1{margin:.2rem 0 0;font-size:clamp(20px,5vw,34px);line-height:1.15}
    .hero p{color:var(--muted);font-size:clamp(14px,2.5vw,16px)}

    .searchbar{display:flex;gap:8px;margin-top:10px}
    .input{flex:1;padding:12px 14px;border-radius:10px;background:#0d1013;border:1px solid rgba(255,255,255,.10);color:var(--text)}
    .btn{padding:12px 14px;border-radius:10px;background:var(--brand);color:#07332b;border:none;font-weight:700}

    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .chip{padding:7px 10px;border-radius:999px;font-size:12px;color:#0b1415;background:var(--brand-2);border:1px solid rgba(255,255,255,.15)}

    /* Carousels (mobile) / Grid (desktop) */
    .hcarousel{
      display:grid;grid-auto-flow:column;grid-auto-columns:82%;gap:12px;overflow-x:auto;scroll-snap-type:x mandatory;
      padding:2px 2px 8px;scrollbar-width:thin;scrollbar-color:#2a3340 transparent
    }
    .hcarousel > *{scroll-snap-align:start}
    .carousel-wrap{position:relative}
    .car-btn{
      position:absolute;top:50%;transform:translateY(-50%);z-index:5;border:none;background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.18);backdrop-filter:blur(6px);color:#fff;width:32px;height:32px;border-radius:10px;display:none;align-items:center;justify-content:center
    }
    .car-btn.prev{left:6px}
    .car-btn.next{right:6px}

    /* Show arrows on wider phones and up */
    @media (min-width: 420px){ .car-btn{display:flex} }
    /* Tablets/desktops: switch to grid */
    @media (min-width: 900px){
      .hcarousel{display:grid;grid-auto-flow:initial;grid-auto-columns:initial;grid-template-columns:repeat(3,1fr);overflow:visible;scroll-snap-type:none}
      .car-btn{display:none}
    }

    .card{padding:12px;border-radius:16px;background:linear-gradient(180deg,#12161b,#101419 70%);border:1px solid rgba(255,255,255,.06)}
    .card h3{margin:8px 0 4px;font-size:clamp(14px,2.4vw,18px)}
    .meta{font-size:12px;color:var(--muted)}
    .tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
    .tag{font-size:11px;border:1px solid rgba(255,255,255,.1);padding:3px 7px;border-radius:999px;color:#cfe6f3}
    .rating{color:#ffdf6c}
    .cta{display:inline-flex;gap:6px;align-items:center;padding:8px 10px;border-radius:10px;background:#0d1013;border:1px solid rgba(255,255,255,.08);color:#dfe8ec}
    .small{font-size:12px}
    .muted{color:var(--muted)}
    .divider{height:1px;background:rgba(255,255,255,.08);margin:10px 0}
    .section-title{display:flex;align-items:center;justify-content:space-between;margin:6px 0 8px}
    .section-title h2{font-size:clamp(15px,2.4vw,20px);margin:0}

    /* Grid blocks beneath hero */
    .grid{margin:10px 0 22px;display:grid;grid-template-columns:1fr;gap:var(--gap)}
    @media (min-width: 980px){ .grid{grid-template-columns:2fr 1fr} }

    /* Reviews */
    .review-list{display:grid;grid-template-columns:1fr;gap:12px}
    @media (min-width: 700px){ .review-list{grid-template-columns:repeat(2,1fr)} }
    .review{background:#0e1216;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:12px}

    /* Ads: never overflow */
    .ad-container{display:flex;justify-content:center;margin:10px 0}
    .ad-inner{width:100%;max-width:728px}
    .adsbygoogle{display:block;width:100%}
    /* Mobile clamps */
    @media (max-width: 600px){
      .ad-inner{max-width:336px}
    }

    /* Sticky sidebar becomes block on mobile */
    .sticky{position:static}
    @media (min-width:980px){ .sticky{position:sticky;top:76px} }

    footer{margin:26px 0 60px;color:var(--muted)}
    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){ *{scroll-behavior:auto !important} }
  </style>

  <!-- Schema -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"Organization","name":"SKYNN","url":"https://skinlabs.co.za","brand":"SKYNN","description":"Curated skincare, reviews, and offers for South Africans.","foundingDate":"2025-08-15"}
  </script>
</head>
<body>
<header>
  <div class="wrap nav">
    <div class="brand" aria-label="SKYNN">
      <span class="brand-icon">S</span>
      <span>SKYNN®</span>
      <span class="badge">formerly SkinLabs South Africa</span>
    </div>

    <!-- Mobile menu -->
    <button class="hamburger" id="navToggle" aria-label="Open menu">
      <span class="icon">menu</span> Menu
    </button>
    <nav class="drawer" id="drawer" aria-label="Primary">
      <a href="#explore"><span class="icon">explore</span> Explore</a>
      <a href="#offers"><span class="icon">local_mall</span> Deals</a>
      <a href="#reviews"><span class="icon">reviews</span> Reviews</a>
      <a href="#submit" class="pill"><span class="icon">upload</span> Submit</a>
      <a href="#signup" class="pill"><span class="icon">person_add</span> Sign up</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <!-- Leaderboard (clamped) -->
  <div class="panel ad-container" style="padding:6px;margin-top:10px">
    <div class="ad-inner">
      <ins class="adsbygoogle" data-ad-client="ca-pub-1237323355260727" data-ad-slot="1111111111" data-ad-format="auto" data-full-width-responsive="true"></ins>
    </div>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </div>

  <section class="hero">
    <div class="panel" style="padding:14px">
      <div class="badge">Launches <b>15 Aug 2025</b></div>
      <h1>Curated skincare for South Africa</h1>
      <p>Guides, ingredient explainers, local brand roundups, and smart deals. Save favourites, write reviews, and build routines that fit your budget.</p>

      <div class="searchbar" role="search" aria-label="Site search">
        <input id="q" class="input" placeholder="Search guides, ingredients, brands…" aria-label="Search" />
        <button id="btnSearch" class="btn"><span class="icon">search</span></button>
      </div>

      <div class="chips" id="chips" aria-label="Filters"></div>
    </div>

    <div class="panel" id="offers" aria-label="Sponsored Offers" style="padding:14px">
      <div class="section-title"><h2>Sponsored Offers</h2><a class="small muted" href="#offers">See all</a></div>

      <div class="carousel-wrap">
        <button class="car-btn prev" data-target="offersRail" aria-label="Scroll left"><span class="icon">chevron_left</span></button>
        <div class="hcarousel" id="offersRail" aria-live="polite"></div>
        <button class="car-btn next" data-target="offersRail" aria-label="Scroll right"><span class="icon">chevron_right</span></button>
      </div>

      <div class="divider"></div>
      <!-- Responsive ad in panel -->
      <div class="ad-container">
        <div class="ad-inner">
          <ins class="adsbygoogle" data-ad-client="ca-pub-1237323355260727" data-ad-slot="2222222222" data-ad-format="auto" data-full-width-responsive="true"></ins>
        </div>
      </div>
      <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
    </div>
  </section>

  <section id="explore" aria-label="Explore content">
    <div class="section-title"><h2>Latest Curations</h2><div class="small muted">Filter: <span id="activeFilter">All</span></div></div>

    <!-- Cards carousel on mobile, grid on desktop -->
    <div class="carousel-wrap">
      <button class="car-btn prev" data-target="cards" aria-label="Scroll left"><span class="icon">chevron_left</span></button>
      <div id="cards" class="hcarousel" aria-live="polite"></div>
      <button class="car-btn next" data-target="cards" aria-label="Scroll right"><span class="icon">chevron_right</span></button>
    </div>

    <div style="display:flex;justify-content:center;margin:10px 0">
      <button id="loadMore" class="cta"><span class="icon">unfold_more</span> Load more</button>
    </div>

    <div class="grid" style="margin-top:var(--gap)">
      <div class="panel sticky" style="padding:12px">
        <div class="section-title"><h2>Top this week</h2></div>
        <div id="topList" class="hcarousel" style="grid-auto-columns:75%"></div>

        <div class="divider"></div>
        <!-- Sidebar ad (clamped) -->
        <div class="ad-container">
          <div class="ad-inner">
            <ins class="adsbygoogle" data-ad-client="ca-pub-1237323355260727" data-ad-slot="4444444444" data-ad-format="auto" data-full-width-responsive="true"></ins>
          </div>
        </div>
        <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>

        <div class="divider"></div>
        <form id="newsletter" action="https://formspree.io/f/xeokkzle" method="POST">
          <label class="small" for="email">Join our list (1–2 emails/month)</label>
          <div class="searchbar" style="margin-top:6px">
            <input type="email" id="email" name="email" class="input" placeholder="you@example.com" required />
            <button type="submit" class="btn"><span class="icon">send</span></button>
          </div>
          <div class="small muted">By subscribing you agree to our Privacy Policy.</div>
        </form>
      </div>
    </div>
  </section>

  <section id="reviews" class="panel" style="padding:14px">
    <div class="section-title">
      <h2>Community Reviews</h2>
      <button id="btnAddReview" class="cta"><span class="icon">rate_review</span> Write a review</button>
    </div>
    <div class="review-list" id="reviewList"></div>
  </section>

  <!-- Footer multiplex (stays within container) -->
  <div class="panel ad-container" style="padding:6px;margin-top:10px">
    <div class="ad-inner" style="max-width:100%">
      <ins class="adsbygoogle" data-ad-client="ca-pub-1237323355260727" data-ad-slot="5555555555" data-ad-format="autorelaxed" data-full-width-responsive="true"></ins>
    </div>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </div>

  <footer class="wrap">
    <div class="divider"></div>
    <div class="small">© 2025 SKYNN® — Curated skincare for South Africa. Not medical advice.</div>
  </footer>
</main>

<!-- Review Modal -->
<div class="modal" id="reviewModal" role="dialog" aria-modal="true" aria-labelledby="revTitle">
  <div class="inner" style="background:#0d1013;border:1px solid rgba(255,255,255,.08);border-radius:16px;max-width:520px;width:calc(100% - 28px);padding:14px;margin:0 auto">
    <h3 id="revTitle" style="margin:0 0 6px">Write a review</h3>
    <form id="reviewForm">
      <label class="small">Product/Guide</label>
      <input name="title" required placeholder="e.g., Vitamin C Guide" class="input" style="width:100%"/>

      <div style="display:flex;gap:10px;margin-top:8px;flex-wrap:wrap">
        <div style="flex:1;min-width:150px">
          <label class="small">Rating (1–5)</label>
          <input name="rating" type="number" min="1" max="5" required class="input" style="width:100%"/>
        </div>
        <div style="flex:1;min-width:150px">
          <label class="small">Skin type</label>
          <select name="skin" class="input" style="width:100%">
            <option>Normal</option><option>Dry</option><option>Oily</option><option>Combination</option><option>Sensitive</option>
          </select>
        </div>
      </div>

      <label class="small" style="margin-top:8px;display:block">Your review</label>
      <textarea name="body" required rows="4" class="input" style="width:100%"></textarea>

      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:10px">
        <button type="button" id="revCancel" class="cta"><span class="icon">close</span> Cancel</button>
        <button type="submit" class="cta" style="background:var(--brand);color:#07332b"><span class="icon">save</span> Save</button>
      </div>
    </form>
  </div>
</div>

<script>
/* ===========================
   NAV (mobile drawer)
=========================== */
const navToggle = document.getElementById('navToggle');
const drawer = document.getElementById('drawer');
navToggle?.addEventListener('click', ()=> drawer.classList.toggle('open'));

/* ===========================
   Dynamic Content (JSON)
=========================== */
const CATEGORIES = ["Guides","Ingredients","Routines","Reviews","Deals","Dermatologist Q&A","Local Brands"];
const chipWrap = document.getElementById('chips');
const cardsEl  = document.getElementById('cards');
const topList  = document.getElementById('topList');
const offersEl = document.getElementById('offersRail');
const activeEl = document.getElementById('activeFilter');
const loadBtn  = document.getElementById('loadMore');
const searchBtn= document.getElementById('btnSearch');
const qInput   = document.getElementById('q');

let active = "All", q="", shown = 0, CONTENT = [], OFFERS = [];

async function loadJSON(path){
  const res = await fetch(path, {cache:'no-store'});
  if(!res.ok) throw new Error(`Failed to load ${path}`);
  return res.json();
}
async function initData(){
  try {
    [CONTENT, OFFERS] = await Promise.all([
      loadJSON('./data/content.json'),
      loadJSON('./data/offers.json')
    ]);
  } catch(e){
    console.warn(e);
    // Minimal fallback demo
    CONTENT = [
      {"type":"Guides","title":"Vitamin C: How to layer with Niacinamide","rating":4.8,"tags":["Brightening","Beginner"],"featured":true},
      {"type":"Ingredients","title":"Retinoids in SA: OTC vs Rx","rating":4.6,"tags":["Anti-ageing","Night"],"featured":true},
      {"type":"Routines","title":"Winter-to-Spring Routine (Budget)","rating":4.5,"tags":["Seasonal","Budget"],"featured":false},
      {"type":"Reviews","title":"Bioderma Atoderm Gel — 2-week test","rating":4.1,"tags":["Sensitive"],"featured":false},
      {"type":"Deals","title":"5 SA dupes for the viral HA serum","rating":4.0,"tags":["Dupe","Hydration"],"featured":false}
    ];
    OFFERS = [
      {"brand":"Clicks","title":"3-for-2 Skincare","code":"","url":"#","blurb":"ClubCard deals.","tag":"Pharmacy"},
      {"brand":"Dis-Chem","title":"R100 OFF ≥ R600","code":"DERMA100","url":"#","blurb":"Derma shop promo.","tag":"Pharmacy"}
    ];
  }
}

/* Filters / Chips */
function makeChip(label){
  const b = document.createElement('button');
  b.className='chip'; b.textContent=label;
  b.onclick=()=>{ active=label; activeEl.textContent=active; shown=0; render(); };
  return b;
}

/* Templates */
function cardTemplate(item){
  const el = document.createElement('div');
  el.className='card';
  el.innerHTML = `
    <div class="meta">${item.type}${item.featured ? ' • <span class="pill">Featured</span>':''}</div>
    <h3>${item.title}</h3>
    <div class="rating">★ ${Number(item.rating||0).toFixed(1)}</div>
    <div class="tags">${(item.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('')}</div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
      <button class="cta small" aria-label="Save to favourites"><span class="icon">grade</span> Save</button>
      ${item.url ? `<a class="small" href="${item.url}" target="_blank" rel="noopener">Read →</a>` : `<a class="small" href="#reviews">Read →</a>`}
    </div>
  `;
  return el;
}
function offerTemplate(o){
  const d = document.createElement('div');
  d.className='card'; d.style.minWidth='260px';
  d.innerHTML = `
    <div class="meta">${o.tag || 'Offer'}</div>
    <h3 style="margin:4px 0">${o.brand||''}</h3>
    <div class="muted">${o.title||''}</div>
    <div class="divider"></div>
    <div class="small"><b>Code:</b> ${o.code || 'N/A'}</div>
    <div class="small muted">${o.blurb||''}</div>
    <div style="margin-top:10px"><a class="cta" href="${o.url||'#'}" target="_blank" rel="noopener"><span class="icon">shopping_bag</span> Shop now</a></div>
  `;
  return d;
}

/* Render */
function renderChips(){
  chipWrap.innerHTML='';
  chipWrap.appendChild(makeChip("All"));
  CATEGORIES.forEach(c=> chipWrap.appendChild(makeChip(c)));
}
function renderOffers(){
  offersEl.innerHTML='';
  OFFERS.forEach(o=> offersEl.appendChild(offerTemplate(o)));
}
function render(){
  cardsEl.innerHTML = '';
  let list = CONTENT.filter(i =>
    (active==='All' || i.type===active) &&
    (q==='' || (i.title||'').toLowerCase().includes(q.toLowerCase()))
  );

  const slice = list.slice(0, shown + 12);
  slice.forEach(item => cardsEl.appendChild(cardTemplate(item)));
  shown = slice.length;
  loadBtn.style.display = shown < list.length ? 'inline-flex':'none';

  // Top list carousel (ratings)
  topList.innerHTML='';
  [...CONTENT].sort((a,b)=>Number(b.rating||0)-Number(a.rating||0)).slice(0,6).forEach(x=>{
    const c = document.createElement('div'); c.className='card'; c.style.minWidth='240px';
    c.innerHTML = `<div class="meta">${x.type}</div><h3>${x.title}</h3><div class="rating">★ ${Number(x.rating||0).toFixed(1)}</div>`;
    topList.appendChild(c);
  });
}

/* Carousel controls */
function scrollByBtn(btn, dir){
  const targetId = btn.getAttribute('data-target');
  const el = document.getElementById(targetId);
  if(!el) return;
  const delta = Math.round(el.clientWidth * 0.9) * (dir==='next'?1:-1);
  el.scrollBy({left: delta, behavior: 'smooth'});
}
document.querySelectorAll('.car-btn.prev').forEach(b=> b.addEventListener('click', ()=> scrollByBtn(b,'prev')));
document.querySelectorAll('.car-btn.next').forEach(b=> b.addEventListener('click', ()=> scrollByBtn(b,'next')));

/* Search & Load */
document.getElementById('btnSearch')?.addEventListener('click', ()=>{ q = qInput.value||''; shown=0; render(); });
qInput?.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ q = qInput.value||''; shown=0; render(); } });
loadBtn?.addEventListener('click', ()=> render());

/* Reviews (localStorage demo) */
const modal = document.getElementById('reviewModal');
document.getElementById('btnAddReview').onclick = ()=>{ modal.style.display='grid'; }
document.getElementById('revCancel').onclick = ()=>{ modal.style.display='none'; }
document.getElementById('reviewForm').onsubmit = (e)=>{
  e.preventDefault();
  const fd = new FormData(e.target);
  const item = Object.fromEntries(fd.entries());
  item.rating = Number(item.rating)||0;
  const ar = JSON.parse(localStorage.getItem('skynn_reviews')||'[]');
  ar.unshift({...item, ts:Date.now()});
  localStorage.setItem('skynn_reviews', JSON.stringify(ar));
  modal.style.display='none';
  paintReviews();
};
function paintReviews(){
  const list = JSON.parse(localStorage.getItem('skynn_reviews')||'[]');
  const box = document.getElementById('reviewList');
  box.innerHTML = '';
  if(list.length===0){ box.innerHTML = '<div class="muted small">No reviews yet — be the first.</div>'; return; }
  list.slice(0,6).forEach(r=>{
    const el = document.createElement('div');
    el.className='review';
    el.innerHTML = `<b>${r.title}</b> <span class="small muted">• ${r.skin}</span><div class="rating">★ ${Number(r.rating).toFixed(1)}</div><div class="small">${r.body}</div>`;
    box.appendChild(el);
  });
}

/* Boot */
(async function(){
  renderChips();
  await initData();
  renderOffers();
  render();
  paintReviews();
  // Push ads once the DOM has initial content
  try{ (adsbygoogle=window.adsbygoogle||[]).push({}); }catch(e){}
})();
</script>
</body>
</html>