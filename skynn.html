<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SKYNN® — South Africa’s Curated Skincare Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="SKYNN® (formerly SkinLabs South Africa) — curated skincare guides, reviews, deals, and dermatologist-backed resources." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <meta name="theme-color" content="#0c0e10" />

  <!-- Your AdSense client ID (load once, at the top) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1237323355260727" crossorigin="anonymous"></script>

  <style>
    /* ---------- Base / Reset ---------- */
    :root{
      --bg:#0c0e10; --panel:#111418; --muted:#8ca5b3; --brand:#6ee7d2; --brand-2:#b3e5ff;
      --text:#eef3f5; --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.35);
      --max-w:1100px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    img{max-width:100%;height:auto;display:block}
    a{color:var(--brand);text-decoration:none}
    button{font:inherit}
    .sr-only{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px)}

    /* ---------- Layout ---------- */
    .wrap{max-width:var(--max-w);margin:0 auto;padding:0 16px}
    header{
      position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.4) blur(8px);
      background:rgba(12,14,16,.85);border-bottom:1px solid rgba(255,255,255,.08)
    }
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 0}
    .brand{font-weight:800;letter-spacing:.4px;display:flex;gap:10px;align-items:center;font-size:clamp(18px,2.2vw,22px)}
    .badge{font-size:12px;color:var(--muted)}
    .menu{display:flex;gap:10px;align-items:center}
    .menu a{color:#dfe8ec;padding:8px 10px;border-radius:10px}
    .pill{font-size:12px;padding:7px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);color:#b7c7d0}

    /* Mobile nav toggle */
    .hamburger{display:none;background:none;border:none;color:#dfe8ec;font-weight:700}
    .drawer{display:flex;gap:8px;align-items:center}
    @media (max-width: 820px){
      .drawer{display:none}
      .hamburger{display:inline-flex}
      .drawer.open{position:absolute;inset:auto 16px auto auto;top:56px;display:flex;flex-direction:column;background:#0e1114;border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:10px}
    }

    .panel{
      background:linear-gradient(180deg,#151a1f,#111418 60%);border:1px solid rgba(255,255,255,.06);
      border-radius:var(--radius);box-shadow:var(--shadow)
    }

    .hero{
      display:grid;grid-template-columns:1fr;gap:16px;padding:16px 0 10px;
    }
    @media (min-width: 940px){
      .hero{grid-template-columns:1.15fr .85fr}
    }
    .hero .panel{padding:16px}
    .hero h1{margin:.2rem 0 0;font-size:clamp(22px,3.2vw,36px);line-height:1.15}
    .hero p{color:var(--muted);font-size:clamp(14px,1.8vw,16px)}

    .searchbar{display:flex;gap:8px;margin-top:12px}
    .input{flex:1;padding:12px 14px;border-radius:10px;background:#0d1013;border:1px solid rgba(255,255,255,.10);color:var(--text)}
    .btn{padding:12px 16px;border-radius:10px;background:var(--brand);color:#07332b;border:none;font-weight:700;cursor:pointer}

    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    .chip{padding:8px 10px;border-radius:999px;font-size:12px;color:#0b1415;background:var(--brand-2);cursor:pointer;border:1px solid rgba(255,255,255,.15)}

    /* Main grid */
    .grid{margin:14px 0 24px;display:grid;grid-template-columns:1fr;gap:16px}
    @media (min-width: 980px){
      .grid{grid-template-columns:2fr 1fr}
    }

    .card{padding:14px;border-radius:16px;background:linear-gradient(180deg,#12161b,#101419 70%);border:1px solid rgba(255,255,255,.06)}
    .card h3{margin:10px 0 6px;font-size:clamp(15px,2vw,18px)}
    .meta{font-size:12px;color:var(--muted)}
    .tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .tag{font-size:11px;border:1px solid rgba(255,255,255,.1);padding:4px 7px;border-radius:999px;color:#cfe6f3}
    .rating{color:#ffdf6c}
    .cta{display:inline-flex;gap:8px;align-items:center;padding:9px 12px;border-radius:10px;background:#0d1013;border:1px solid rgba(255,255,255,.08);color:#dfe8ec}

    .gridlist{display:grid;grid-template-columns:1fr;gap:12px}
    @media (min-width: 560px){ .gridlist{grid-template-columns:repeat(2,1fr)} }

    .offerrail{display:flex;gap:12px;overflow:auto;scroll-snap-type:x mandatory}
    .offer{min-width:230px;scroll-snap-align:start}

    .sticky{position:sticky;top:84px}
    footer{margin:30px 0 60px;color:var(--muted)}
    .muted{color:var(--muted)}
    .section-title{display:flex;align-items:center;justify-content:space-between;margin:6px 0 8px}
    .section-title h2{font-size:clamp(16px,2.2vw,20px);margin:0}
    .small{font-size:12px}
    .divider{height:1px;background:rgba(255,255,255,.08);margin:10px 0}

    .adbox{background:#0a0d0f;border:1px dashed rgba(255,255,255,.12);border-radius:14px;padding:10px;text-align:center;font-size:12px;color:#a8b7bf}
    .review-list{display:grid;grid-template-columns:1fr;gap:12px}
    @media (min-width: 700px){ .review-list{grid-template-columns:repeat(2,1fr)} }
    .review{background:#0e1216;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:12px}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;place-items:center;padding:14px}
    .modal .inner{background:#0d1013;border:1px solid rgba(255,255,255,.08);border-radius:16px;max-width:520px;width:100%;padding:16px}
  </style>

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"SKYNN",
    "url":"https://skinlabs.co.za",
    "brand":"SKYNN",
    "description":"Curated skincare, reviews, and offers for South Africans.",
    "foundingDate":"2025-08-15"
  }
  </script>
</head>
<body>
<header>
  <div class="wrap nav">
    <div class="brand">SKYNN® <span class="badge">formerly SkinLabs South Africa</span></div>

    <button class="hamburger" id="navToggle" aria-label="Open navigation">☰</button>
    <nav class="drawer" id="drawer" aria-label="Primary">
      <a href="#explore">Explore</a>
      <a href="#offers">Deals</a>
      <a href="#reviews">Reviews</a>
      <a href="#submit" class="pill">Submit</a>
      <a href="#signup" class="pill">Sign up</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <!-- TOP LEADERBOARD AD -->
  <div class="panel" style="padding:8px;margin-top:12px">
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1237323355260727" data-ad-slot="1111111111" data-ad-format="horizontal" data-full-width-responsive="true"></ins>
    <script> (adsbygoogle=window.adsbygoogle||[]).push({}); </script>
  </div>

  <section class="hero">
    <div class="panel">
      <div class="badge">Launches <b>15 Aug 2025</b></div>
      <h1>Curated skincare for South Africa</h1>
      <p>Guides, ingredient explainers, local brand roundups, and smart deals. Save favourites, add reviews, and build routines that fit your budget.</p>

      <div class="searchbar" role="search">
        <input id="q" class="input" placeholder="Search guides, ingredients, brands..." aria-label="Search" />
        <button id="btnSearch" class="btn">Search</button>
      </div>

      <div class="chips" id="chips" aria-label="Filters"></div>
    </div>

    <div class="panel" id="offers" aria-label="Sponsored Offers">
      <div class="section-title"><h2>Sponsored Offers</h2><a class="small muted" href="#offers">See all</a></div>
      <div class="offerrail" id="offersRail" aria-live="polite"></div>
      <div class="divider"></div>

      <!-- IN-PANEL RESPONSIVE AD -->
      <div class="adbox">Ad — Responsive</div>
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1237323355260727" data-ad-slot="2222222222" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script> (adsbygoogle=window.adsbygoogle||[]).push({}); </script>
    </div>
  </section>

  <section class="grid" id="explore" aria-label="Explore content">
    <div>
      <div class="section-title">
        <h2>Latest Curations</h2>
        <div class="small muted">Filter: <span id="activeFilter">All</span></div>
      </div>
      <div id="cards" class="gridlist" aria-live="polite"></div>

      <!-- IN-FEED AD (rendered again via JS between cards on large screens) -->
      <div class="panel" style="margin-top:12px">
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1237323355260727" data-ad-slot="3333333333" data-ad-format="fluid" data-ad-layout-key="-fg+5n+6t-e7+az"></ins>
        <script> (adsbygoogle=window.adsbygoogle||[]).push({}); </script>
      </div>

      <div style="display:flex;justify-content:center;margin:14px 0">
        <button id="loadMore" class="cta">Load more</button>
      </div>
    </div>

    <aside>
      <div class="panel sticky" style="padding:12px">
        <div class="section-title"><h2>Top this week</h2></div>
        <div id="topList" class="gridlist"></div>
        <div class="divider"></div>

        <!-- SIDEBAR AD -->
        <div class="adbox">Ad — Sidebar</div>
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1237323355260727" data-ad-slot="4444444444" data-ad-format="rectangle" data-full-width-responsive="true"></ins>
        <script> (adsbygoogle=window.adsbygoogle||[]).push({}); </script>

        <div class="divider"></div>
        <!-- Newsletter (uses your Formspree endpoint) -->
        <form id="newsletter" action="https://formspree.io/f/xeokkzle" method="POST">
          <label class="small" for="email">Join our list (1–2 emails/month)</label>
          <div class="searchbar" style="margin-top:6px">
            <input type="email" id="email" name="email" class="input" placeholder="your@email.com" required />
            <button type="submit" class="btn">Subscribe</button>
          </div>
          <div class="small muted">By subscribing you agree to our Privacy Policy.</div>
        </form>
      </div>
    </aside>
  </section>

  <section id="reviews" class="panel" style="padding:14px">
    <div class="section-title"><h2>Community Reviews</h2><button id="btnAddReview" class="cta">Write a review</button></div>
    <div class="review-list" id="reviewList"></div>
  </section>

  <!-- FOOTER AD (Multiplex / AutoRelaxed) -->
  <section class="panel" style="padding:8px;margin-top:12px">
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1237323355260727" data-ad-slot="5555555555" data-ad-format="autorelaxed" data-full-width-responsive="true"></ins>
    <script> (adsbygoogle=window.adsbygoogle||[]).push({}); </script>
  </section>

  <footer class="wrap">
    <div class="divider"></div>
    <div class="small">
      © 2025 SKYNN® — Curated skincare for South Africa. Not medical advice.
    </div>
  </footer>
</main>

<!-- Review Modal -->
<div class="modal" id="reviewModal" role="dialog" aria-modal="true" aria-labelledby="revTitle">
  <div class="inner">
    <h3 id="revTitle">Write a review</h3>
    <form id="reviewForm">
      <label class="small">Product/Guide</label>
      <input name="title" required placeholder="e.g., Vitamin C Guide" class="input" style="width:100%"/>
      <div style="display:flex;gap:10px;margin-top:8px;flex-wrap:wrap">
        <div style="flex:1;min-width:150px">
          <label class="small">Rating (1–5)</label>
          <input name="rating" type="number" min="1" max="5" required class="input" style="width:100%"/>
        </div>
        <div style="flex:1;min-width:150px">
          <label class="small">Skin type</label>
          <select name="skin" class="input" style="width:100%">
            <option>Normal</option><option>Dry</option><option>Oily</option><option>Combination</option><option>Sensitive</option>
          </select>
        </div>
      </div>
      <label class="small" style="margin-top:8px;display:block">Your review</label>
      <textarea name="body" required rows="4" class="input" style="width:100%"></textarea>
      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:10px">
        <button type="button" id="revCancel" class="cta">Cancel</button>
        <button type="submit" class="cta" style="background:var(--brand);color:#07332b">Save</button>
      </div>
    </form>
  </div>
</div>

<script defer>
/* ===========================
   NAV (mobile drawer)
=========================== */
const navToggle = document.getElementById('navToggle');
const drawer = document.getElementById('drawer');
navToggle?.addEventListener('click', ()=> drawer.classList.toggle('open'));

/* ===========================
   Dynamic Content (JSON)
   - /data/content.json
   - /data/offers.json
=========================== */

const CATEGORIES = ["Guides","Ingredients","Routines","Reviews","Deals","Dermatologist Q&A","Local Brands"];
const chipWrap = document.getElementById('chips');
const cardsEl  = document.getElementById('cards');
const topList  = document.getElementById('topList');
const offersEl = document.getElementById('offersRail');
const activeEl = document.getElementById('activeFilter');
const loadBtn  = document.getElementById('loadMore');
const searchBtn= document.getElementById('btnSearch');
const qInput   = document.getElementById('q');

let active = "All", q="", shown = 0, CONTENT = [], OFFERS = [];

/* Load JSON files (works on GitHub Pages as long as files are in /data/) */
async function loadJSON(path){
  const res = await fetch(path, {cache:'no-store'});
  if(!res.ok) throw new Error(`Failed to load ${path}`);
  return res.json();
}
async function initData(){
  try {
    [CONTENT, OFFERS] = await Promise.all([
      loadJSON('./data/content.json'),
      loadJSON('./data/offers.json')
    ]);
  } catch(e){
    console.error(e);
    // Fallback minimal demo data
    CONTENT = [
      {"type":"Guides","title":"Vitamin C: How to layer with Niacinamide","rating":4.8,"tags":["Brightening","Beginner"],"featured":true},
      {"type":"Ingredients","title":"Retinoids in SA: OTC vs Rx","rating":4.6,"tags":["Anti-ageing","Night"],"featured":true},
      {"type":"Routines","title":"Winter-to-Spring Routine (Budget)","rating":4.5,"tags":["Seasonal","Budget"],"featured":false},
      {"type":"Reviews","title":"Bioderma Atoderm Gel — 2-week test","rating":4.1,"tags":["Sensitive"],"featured":false},
      {"type":"Deals","title":"5 SA dupes for the viral HA serum","rating":4.0,"tags":["Dupe","Hydration"],"featured":false}
    ];
    OFFERS = [
      {"brand":"Clicks","title":"3-for-2 Skincare","code":"","url":"#","blurb":"ClubCard deals.","tag":"Pharmacy"},
      {"brand":"Dis-Chem","title":"R100 OFF ≥ R600","code":"DERMA100","url":"#","blurb":"Derma shop promo.","tag":"Pharmacy"}
    ];
  }
}

/* Filters / Chips */
function makeChip(label){
  const b = document.createElement('button');
  b.className='chip'; b.textContent=label;
  b.onclick=()=>{ active=label; activeEl.textContent=active; shown=0; render(); }
  return b;
}
function renderChips(){
  chipWrap.innerHTML='';
  chipWrap.appendChild(makeChip("All"));
  CATEGORIES.forEach(c=> chipWrap.appendChild(makeChip(c)));
}

/* Cards */
function cardTemplate(item){
  const el = document.createElement('div');
  el.className='card';
  el.innerHTML = `
    <div class="meta">${item.type}${item.featured ? ' • <span class="pill">Featured</span>':''}</div>
    <h3>${item.title}</h3>
    <div class="rating">★ ${Number(item.rating||0).toFixed(1)}</div>
    <div class="tags">${(item.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('')}</div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
      <button class="cta small fav" aria-label="Save to favourites">☆ Save</button>
      ${item.url ? `<a class="small" href="${item.url}" target="_blank" rel="noopener">Read more →</a>` : `<a class="small" href="#reviews">Read more →</a>`}
    </div>
  `;
  el.querySelector('.fav').onclick=()=> alert('Saved to favourites (demo)');
  return el;
}

function renderOffers(){
  offersEl.innerHTML='';
  OFFERS.forEach(o=>{
    const d = document.createElement('div');
    d.className='offer card';
    d.innerHTML = `
      <div class="meta">${o.tag || 'Offer'}</div>
      <h3 style="margin:4px 0">${o.brand||''}</h3>
      <div class="muted">${o.title||''}</div>
      <div class="divider"></div>
      <div class="gridlist">
        <div>
          <div class="small muted">Code</div>
          <div class="pill">${o.code || 'N/A'}</div>
        </div>
        <div>
          <div class="small muted">Details</div>
          <div class="small">${o.blurb||''}</div>
        </div>
      </div>
      <div style="margin-top:10px"><a class="cta" href="${o.url||'#'}" target="_blank" rel="noopener">Shop now</a></div>
    `;
    offersEl.appendChild(d);
  });
}

function render(){
  cardsEl.innerHTML = '';
  let list = CONTENT.filter(i =>
    (active==='All' || i.type===active) &&
    (q==='' || (i.title||'').toLowerCase().includes(q.toLowerCase()))
  );
  const slice = list.slice(0, shown + 8); // show more per click
  slice.forEach((item, idx)=>{
    cardsEl.appendChild(cardTemplate(item));
    // Optional in-feed ad on larger screens every 4th card
    if (window.innerWidth >= 980 && (idx+1)%4===0){
      const ad = document.createElement('div');
      ad.className='panel';
      ad.style.marginTop = '8px';
      ad.innerHTML = `
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1237323355260727" data-ad-slot="6666666666" data-ad-format="fluid"></ins>
      `;
      cardsEl.appendChild(ad);
      try{ (adsbygoogle=window.adsbygoogle||[]).push({}); }catch(e){}
    }
  });
  shown = slice.length;
  loadBtn.style.display = shown < list.length ? 'inline-flex':'none';

  // Top list
  topList.innerHTML='';
  [...CONTENT].sort((a,b)=>Number(b.rating||0)-Number(a.rating||0)).slice(0,4).forEach(x=>{
    const c = document.createElement('div'); c.className='card';
    c.innerHTML = `<div class="meta">${x.type}</div><h3>${x.title}</h3><div class="rating">★ ${Number(x.rating||0).toFixed(1)}</div>`;
    topList.appendChild(c);
  });
}

/* Search & Load More */
searchBtn?.addEventListener('click', ()=>{ q = qInput.value||''; shown=0; render(); });
qInput?.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ q = qInput.value||''; shown=0; render(); } });
loadBtn?.addEventListener('click', ()=> render());

/* Reviews (localStorage for now) */
const modal = document.getElementById('reviewModal');
document.getElementById('btnAddReview').onclick = ()=>{ modal.style.display='grid'; }
document.getElementById('revCancel').onclick = ()=>{ modal.style.display='none'; }
document.getElementById('reviewForm').onsubmit = (e)=>{
  e.preventDefault();
  const fd = new FormData(e.target);
  const item = Object.fromEntries(fd.entries());
  item.rating = Number(item.rating)||0;
  const ar = JSON.parse(localStorage.getItem('skynn_reviews')||'[]');
  ar.unshift({...item, ts:Date.now()});
  localStorage.setItem('skynn_reviews', JSON.stringify(ar));
  modal.style.display='none';
  paintReviews();
};
function paintReviews(){
  const list = JSON.parse(localStorage.getItem('skynn_reviews')||'[]');
  const box = document.getElementById('reviewList');
  box.innerHTML = '';
  if(list.length===0){ box.innerHTML = '<div class="muted small">No reviews yet — be the first.</div>'; return; }
  list.slice(0,6).forEach(r=>{
    const el = document.createElement('div');
    el.className='review';
    el.innerHTML = `<b>${r.title}</b> <span class="small muted">• ${r.skin}</span><div class="rating">★ ${Number(r.rating).toFixed(1)}</div><div class="small">${r.body}</div>`;
    box.appendChild(el);
  });
}

/* Boot */
(async function(){
  // Build chips early (so UI is visible while JSON loads)
  chipWrap.innerHTML = '';
  chipWrap.appendChild(makeChip("All"));
  CATEGORIES.forEach(c=> chipWrap.appendChild(makeChip(c)));

  await initData();
  renderOffers();
  render();
  paintReviews();
})();
</script>
</body>
</html>